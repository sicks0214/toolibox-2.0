# TooliBox 快速启动指南

## 本地开发环境配置

### 1. 安装依赖

#### 前端
```bash
cd frontend
npm install
```

#### 后端
```bash
cd backend
npm install
```

### 2. 配置环境变量

#### 前端环境变量 (frontend/.env)
```bash
cd frontend
cp .env.example .env
```

编辑 `.env` 文件：
```
NEXT_PUBLIC_API_URL=http://localhost:8000
```

#### 后端环境变量 (backend/.env)
```bash
cd backend
cp .env.example .env
```

编辑 `.env` 文件：
```
DATABASE_URL="postgresql://toolibox_user:your_password@localhost:5432/toolibox"
R2_ACCOUNT_ID=your_account_id
R2_ACCESS_KEY_ID=your_access_key
R2_SECRET_ACCESS_KEY=your_secret_key
R2_BUCKET_NAME=toolibox-feedback
PORT=8000
NODE_ENV=development
FRONTEND_URL=http://localhost:3000
```

### 3. 设置数据库

```bash
# 登录 PostgreSQL
sudo -u postgres psql

# 创建数据库和用户
CREATE DATABASE toolibox;
CREATE USER toolibox_user WITH PASSWORD 'your_password';
GRANT ALL PRIVILEGES ON DATABASE toolibox TO toolibox_user;
\q

# 运行数据库迁移
cd backend
npx prisma migrate dev
npx prisma generate
```

### 4. 启动开发服务器

#### 终端 1 - 启动后端
```bash
cd backend
npm run dev
```

后端将运行在 `http://localhost:8000`

#### 终端 2 - 启动前端
```bash
cd frontend
npm run dev
```

前端将运行在 `http://localhost:3000`

### 5. 验证运行

打开浏览器访问：
- 前端首页: http://localhost:3000
- 后端健康检查: http://localhost:8000/api/health

## 常见问题

### Q: 前端无法连接后端？
A: 检查 `frontend/.env` 中的 `NEXT_PUBLIC_API_URL` 是否正确设置为 `http://localhost:8000`

### Q: 数据库连接失败？
A: 确保 PostgreSQL 服务正在运行：
```bash
sudo systemctl status postgresql
```

检查 `backend/.env` 中的 `DATABASE_URL` 是否正确。

### Q: Prisma 迁移失败？
A: 删除 `backend/prisma/migrations` 文件夹并重新运行：
```bash
rm -rf backend/prisma/migrations
cd backend
npx prisma migrate dev --name init
```

### Q: 端口被占用？
A: 更改端口号：
- 前端: 修改 `frontend/package.json` 中的 dev 脚本，添加 `-p 3001`
- 后端: 修改 `backend/.env` 中的 `PORT`

## 开发工具

### Prisma Studio (数据库可视化)
```bash
cd backend
npx prisma studio
```
访问 http://localhost:5555 查看和编辑数据库

### 代码格式化
```bash
# 前端
cd frontend
npm run lint

# 后端
cd backend
npm run build
```

## 下一步

- 查看 README.md 了解更多详细信息
- 查看项目需求文档.md 了解项目规划
- 开始开发实际工具功能

## 联系方式

如有问题，请通过以下方式联系：
- 邮箱: feedback@toolibox.com
- 提交 Issue
