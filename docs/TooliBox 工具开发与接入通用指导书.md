# TooliBox å·¥å…·å¼€å‘ä¸æ¥å…¥é€šç”¨æŒ‡å¯¼ä¹¦

> **ç‰ˆæœ¬**: v1.1
> **åˆ›å»ºæ—¥æœŸ**: 2025-12-10
> **æ›´æ–°æ—¥æœŸ**: 2025-12-11
> **é€‚ç”¨èŒƒå›´**: TooliBox æ‰€æœ‰å·¥å…·å¼€å‘ï¼ˆ30ä¸ªå·¥å…·ï¼‰
> **ç›®æ ‡**: æ ‡å‡†åŒ–å·¥å…·å¼€å‘æµç¨‹ï¼Œå®ç°å¿«é€Ÿå¼€å‘ä¸æ— ç¼æ¥å…¥

---

## ğŸ“‹ ç›®å½•

1. [å¼€å‘ç­–ç•¥](#å¼€å‘ç­–ç•¥)
2. [æŠ€æœ¯æ ˆè§„èŒƒ](#æŠ€æœ¯æ ˆè§„èŒƒ)
3. [å¼€å‘ç¯å¢ƒæ­å»º](#å¼€å‘ç¯å¢ƒæ­å»º)
4. [ç»„ä»¶æ¶æ„è®¾è®¡](#ç»„ä»¶æ¶æ„è®¾è®¡)
5. [å·¥å…·åˆ†ç±»ä¸è®¾è®¡æ¨¡å¼](#å·¥å…·åˆ†ç±»ä¸è®¾è®¡æ¨¡å¼)
6. [æ ·å¼è§„èŒƒ](#æ ·å¼è§„èŒƒ)
7. [å¼€å‘æµç¨‹](#å¼€å‘æµç¨‹)
8. [æ¥å…¥ä¸»é¡¹ç›®æµç¨‹](#æ¥å…¥ä¸»é¡¹ç›®æµç¨‹)
9. [æµ‹è¯•è§„èŒƒ](#æµ‹è¯•è§„èŒƒ)
10. [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)
11. [å·¥å…·å¼€å‘ç¤ºä¾‹](#å·¥å…·å¼€å‘ç¤ºä¾‹)
12. [**å‰åç«¯åˆ†ç¦»å·¥å…·å¼€å‘æŒ‡å—**](#å‰åç«¯åˆ†ç¦»å·¥å…·å¼€å‘æŒ‡å—) â­ NEW
13. [**å¤–éƒ¨ AI API æ¥å…¥æŒ‡å—**](#å¤–éƒ¨-ai-api-æ¥å…¥æŒ‡å—) â­ NEW

---

## å¼€å‘ç­–ç•¥

### æ ¸å¿ƒåŸåˆ™

```
å¤–éƒ¨ç‹¬ç«‹å¼€å‘ â†’ å®Œæ•´æµ‹è¯• â†’ æå–ç»„ä»¶ â†’ æ¥å…¥ä¸»é¡¹ç›® â†’ éƒ¨ç½²ä¸Šçº¿
```

### ä¸ºä»€ä¹ˆè¦ç‹¬ç«‹å¼€å‘ï¼Ÿ

| ä¼˜åŠ¿ | è¯´æ˜ |
|------|------|
| âœ… **å¼€å‘æ•ˆç‡é«˜** | Vite çƒ­é‡è½½é€Ÿåº¦å¿«ï¼Œæ— éœ€ç­‰å¾… Next.js ç¼–è¯‘ |
| âœ… **ç¯å¢ƒéš”ç¦»** | ä¸å—ä¸»é¡¹ç›®è·¯ç”±ã€ä¸­é—´ä»¶ã€å›½é™…åŒ–ç­‰å¤æ‚é…ç½®å¹²æ‰° |
| âœ… **è°ƒè¯•æ–¹ä¾¿** | ç‹¬ç«‹é¡¹ç›®ç»“æ„ç®€å•ï¼Œé—®é¢˜å®šä½å¿« |
| âœ… **å¯å¤ç”¨** | ç»„ä»¶è‡ªåŒ…å«ï¼Œå¯è¿ç§»åˆ°å…¶ä»–é¡¹ç›® |
| âœ… **æ¥å…¥ç®€å•** | å¤åˆ¶ç²˜è´´å³å¯ï¼Œæ— éœ€æ„å»ºè„šæœ¬ |

---

## æŠ€æœ¯æ ˆè§„èŒƒ

### å¿…é¡»ä½¿ç”¨çš„æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | è¯´æ˜ |
|------|------|------|------|
| **React** | 18.3.x | UIæ¡†æ¶ | ä¸ä¸»é¡¹ç›®ä¸€è‡´ |
| **TypeScript** | 5.x | ç±»å‹å®‰å…¨ | å¿…é¡»ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ |
| **Tailwind CSS** | 3.4.x | æ ·å¼ | ä½¿ç”¨ä¸»é¡¹ç›®é…ç½® |
| **Vite** | æœ€æ–°ç‰ˆ | å¼€å‘å·¥å…· | å¿«é€Ÿçƒ­é‡è½½ |

### ç¦æ­¢ä½¿ç”¨çš„æŠ€æœ¯

âŒ **ä»¥ä¸‹æŠ€æœ¯ä¼šå¯¼è‡´æ¥å…¥é—®é¢˜ï¼Œä¸¥ç¦ä½¿ç”¨**:

| æŠ€æœ¯ | åŸå›  |
|------|------|
| CSS Modules | éš¾ä»¥è¿ç§»åˆ°ä¸»é¡¹ç›® |
| styled-components / emotion | å¢åŠ ä¾èµ–å¤æ‚åº¦ |
| Redux / Zustand / MobX | å¤–éƒ¨å¼€å‘ä¸éœ€è¦å…¨å±€çŠ¶æ€ |
| React Router | ä¸»é¡¹ç›®ä½¿ç”¨ Next.js è·¯ç”± |
| jQuery | ä¸ç¬¦åˆ React ç”Ÿæ€ |
| Lodash | å°½é‡ä½¿ç”¨åŸç”Ÿ JS |

### å¯é€‰ä½¿ç”¨çš„æŠ€æœ¯

âœ… **ä»¥ä¸‹åº“å¯ä»¥æ ¹æ®å·¥å…·éœ€æ±‚é€‰æ‹©æ€§ä½¿ç”¨**:

| æŠ€æœ¯ | ç”¨é€” | ç¤ºä¾‹å·¥å…· |
|------|------|---------|
| **axios** | HTTP è¯·æ±‚ | éœ€è¦è°ƒç”¨å¤–éƒ¨ API çš„å·¥å…· |
| **date-fns** | æ—¥æœŸå¤„ç† | Timestamp Converter |
| **qrcode** | äºŒç»´ç ç”Ÿæˆ | QR Code Generator |
| **file-saver** | æ–‡ä»¶ä¸‹è½½ | PDF ç›¸å…³å·¥å…· |
| **react-dropzone** | æ–‡ä»¶ä¸Šä¼  | Image Compressor |
| **canvas** / **konva** | å›¾åƒå¤„ç† | Image Cropper |
| **monaco-editor** | ä»£ç ç¼–è¾‘å™¨ | JSON Formatter, Code Beautifier |

---

## å¼€å‘ç¯å¢ƒæ­å»º

### æ­¥éª¤1: åˆ›å»ºç‹¬ç«‹é¡¹ç›®

```bash
# 1. åˆ›å»º Vite + React + TypeScript é¡¹ç›®
# æ›¿æ¢ {tool-name} ä¸ºä½ çš„å·¥å…·åç§°ï¼ˆå°å†™ï¼Œç”¨è¿å­—ç¬¦åˆ†éš”ï¼‰
npm create vite@latest {tool-name}-dev -- --template react-ts

# ç¤ºä¾‹:
# npm create vite@latest word-counter-dev -- --template react-ts
# npm create vite@latest json-formatter-dev -- --template react-ts
# npm create vite@latest image-compressor-dev -- --template react-ts

# 2. è¿›å…¥é¡¹ç›®ç›®å½•
cd {tool-name}-dev

# 3. å®‰è£…ä¾èµ–
npm install

# 4. å®‰è£… Tailwind CSS
npm install -D tailwindcss postcss autoprefixer

# 5. åˆå§‹åŒ– Tailwind
npx tailwindcss init -p
```

### æ­¥éª¤2: é…ç½® Tailwind CSS

**âš ï¸ é‡è¦ï¼šå¿…é¡»ä½¿ç”¨ä¸»é¡¹ç›®çš„ Tailwind é…ç½®ï¼Œç¡®ä¿æ ·å¼ä¸€è‡´ï¼**

#### `tailwind.config.js`

```javascript
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        // TooliBox ä¸»é¢˜è‰²ï¼ˆå¿…é¡»ä¸ä¸»é¡¹ç›®ä¸€è‡´ï¼‰
        primary: {
          DEFAULT: '#4A9C82',  // ç¿ ç»¿è‰²
          50: '#f0f9f6',
          100: '#d9f0e8',
          200: '#b3e1d1',
          300: '#80ccb3',
          400: '#4daf91',
          500: '#4A9C82',  // ä¸»è‰²
          600: '#3a7d68',
          700: '#2f6453',
          800: '#285043',
          900: '#234239',
        },
        accent: {
          DEFAULT: '#FF9F66',  // æ©™è‰²å¼ºè°ƒè‰²
          50: '#fff5ed',
          100: '#ffe8d5',
          200: '#ffd0aa',
          300: '#ffb074',
          400: '#FF9F66',  // å¼ºè°ƒè‰²
          500: '#fb7c3c',
          600: '#ec5f1a',
          700: '#c44710',
          800: '#9b3a10',
          900: '#7c3111',
        },
        neutral: {
          DEFAULT: '#2C3E3A',  // æ·±ç°ç»¿
          50: '#f7f8f8',
          100: '#e3e5e4',
          200: '#c7cbc9',
          300: '#a5aca9',
          400: '#828b88',
          500: '#677170',
          600: '#525b59',
          700: '#444c4a',
          800: '#3a413f',
          900: '#2C3E3A',  // ä¸­æ€§è‰²
        },
      },
      backgroundImage: {
        // 5ä¸ªåˆ†ç±»çš„æ¸å˜è‰²
        'gradient-text': 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
        'gradient-file': 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
        'gradient-image': 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
        'gradient-generate': 'linear-gradient(135deg, #fad0c4 0%, #ffd1ff 100%)',
        'gradient-developer': 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',
      },
    },
  },
  plugins: [],
}
```

#### `src/index.css`

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================ */
/* åŸºç¡€æ ·å¼ */
/* ============================================ */
@layer base {
  body {
    @apply text-neutral-900 bg-gray-50;
  }

  h1 {
    @apply text-3xl font-bold;
  }

  h2 {
    @apply text-2xl font-semibold;
  }

  h3 {
    @apply text-xl font-semibold;
  }
}

/* ============================================ */
/* é€šç”¨ç»„ä»¶æ ·å¼ */
/* ============================================ */
@layer components {
  /* æŒ‰é’®æ ·å¼ */
  .btn-primary {
    @apply bg-primary hover:bg-primary-600 text-white font-medium px-4 py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-secondary {
    @apply bg-gray-200 hover:bg-gray-300 text-neutral-900 font-medium px-4 py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-accent {
    @apply bg-accent hover:bg-accent-600 text-white font-medium px-4 py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* è¾“å…¥æ¡†æ ·å¼ */
  .input-field {
    @apply w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent;
  }

  .textarea-field {
    @apply w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-y;
  }

  /* å¡ç‰‡æ ·å¼ */
  .card {
    @apply bg-white rounded-lg shadow-md p-6;
  }

  .card-hover {
    @apply bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow;
  }

  /* å¾½ç« æ ·å¼ */
  .badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium;
  }

  .badge-primary {
    @apply bg-primary-100 text-primary-800;
  }

  .badge-accent {
    @apply bg-accent-100 text-accent-800;
  }

  .badge-success {
    @apply bg-green-100 text-green-800;
  }

  .badge-warning {
    @apply bg-yellow-100 text-yellow-800;
  }

  .badge-error {
    @apply bg-red-100 text-red-800;
  }
}
```

### æ­¥éª¤3: æ¸…ç†åˆå§‹æ–‡ä»¶

```bash
# åˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶
rm src/App.css
rm src/assets/react.svg
rm public/vite.svg
```

---

## ç»„ä»¶æ¶æ„è®¾è®¡

### æ ¸å¿ƒåŸåˆ™

#### 1. è‡ªåŒ…å«ç»„ä»¶ï¼ˆCriticalï¼ï¼‰

```typescript
// âœ… å¥½çš„è®¾è®¡ï¼šç»„ä»¶å®Œå…¨è‡ªåŒ…å«
export default function MyTool({ labels }: MyToolProps) {
  // âœ… æ‰€æœ‰çŠ¶æ€åœ¨ç»„ä»¶å†…
  const [input, setInput] = useState('');
  const [output, setOutput] = useState('');

  // âœ… æ‰€æœ‰é€»è¾‘åœ¨ç»„ä»¶å†…
  const processInput = (value: string) => {
    // å¤„ç†é€»è¾‘
  };

  // âœ… æ‰€æœ‰UIåœ¨ç»„ä»¶å†…
  return <div>...</div>;
}

// âŒ ä¸å¥½çš„è®¾è®¡ï¼šä¾èµ–å¤–éƒ¨
import { useGlobalState } from 'some-library';  // âŒ ä¾èµ–å¤–éƒ¨çŠ¶æ€
import { useRouter } from 'next/navigation';     // âŒ ä¾èµ– Next.js
import './styles.css';                           // âŒ å¤–éƒ¨ CSS æ–‡ä»¶
```

#### 2. Props é©±åŠ¨å›½é™…åŒ–

```typescript
interface MyToolProps {
  /**
   * å›½é™…åŒ–æ–‡æœ¬æ ‡ç­¾ï¼ˆå¯é€‰ï¼‰
   * å¤–éƒ¨å¼€å‘æ—¶ä½¿ç”¨é»˜è®¤è‹±æ–‡ï¼Œæ¥å…¥æ—¶ä¼ å…¥ç¿»è¯‘æ–‡æœ¬
   */
  labels?: {
    title?: string;
    subtitle?: string;
    inputPlaceholder?: string;
    outputLabel?: string;
    // ... å…¶ä»–æ–‡æœ¬
  };

  /**
   * å…¶ä»–å¯é€‰é…ç½®
   */
  initialValue?: string;
  theme?: 'light' | 'dark';
  showAdvancedOptions?: boolean;
}

// é»˜è®¤æ ‡ç­¾ï¼ˆè‹±æ–‡ï¼‰
const DEFAULT_LABELS = {
  title: 'My Tool',
  subtitle: 'Description of the tool',
  inputPlaceholder: 'Enter your input...',
  // ...
};

export default function MyTool({ labels, initialValue = '' }: MyToolProps) {
  // åˆå¹¶é»˜è®¤æ ‡ç­¾å’Œä¼ å…¥çš„æ ‡ç­¾
  const mergedLabels = useMemo(() => ({
    ...DEFAULT_LABELS,
    ...labels,
  }), [labels]);

  return (
    <div>
      <h1>{mergedLabels.title}</h1>
      <p>{mergedLabels.subtitle}</p>
      {/* ä½¿ç”¨ mergedLabels */}
    </div>
  );
}
```

#### 3. ç»„ä»¶æ‹†åˆ†åŸåˆ™

```typescript
// ä¸»ç»„ä»¶ç›®å½•ç»“æ„
src/components/MyTool/
â”œâ”€â”€ index.tsx          # ä¸»ç»„ä»¶ï¼ˆå¯¼å‡ºï¼‰
â”œâ”€â”€ InputSection.tsx   # è¾“å…¥åŒºåŸŸå­ç»„ä»¶
â”œâ”€â”€ OutputSection.tsx  # è¾“å‡ºåŒºåŸŸå­ç»„ä»¶
â”œâ”€â”€ ControlPanel.tsx   # æ§åˆ¶é¢æ¿å­ç»„ä»¶
â”œâ”€â”€ utils.ts           # å·¥å…·å‡½æ•°
â”œâ”€â”€ types.ts           # ç±»å‹å®šä¹‰
â””â”€â”€ constants.ts       # å¸¸é‡å®šä¹‰

// æ‹†åˆ†å»ºè®®ï¼š
// - å•ä¸ªæ–‡ä»¶ä¸è¶…è¿‡ 300 è¡Œ
// - ç‹¬ç«‹åŠŸèƒ½æ¨¡å—æ‹†åˆ†ä¸ºå­ç»„ä»¶
// - å¯å¤ç”¨é€»è¾‘æå–ä¸ºå·¥å…·å‡½æ•°
```

---

## å·¥å…·åˆ†ç±»ä¸è®¾è®¡æ¨¡å¼

### 5å¤§åˆ†ç±»åŠå…¸å‹è®¾è®¡æ¨¡å¼

#### 1ï¸âƒ£ æ–‡æœ¬å·¥å…· (Text Tools)

**ç‰¹ç‚¹**: è¾“å…¥æ–‡æœ¬ â†’ å¤„ç† â†’ è¾“å‡ºç»“æœ

**å…¸å‹ç»„ä»¶ç»“æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ ‡é¢˜ + å‰¯æ ‡é¢˜                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¾“å…¥æ¡† (Textarea)               â”‚
â”‚  [æ“ä½œæŒ‰é’®]                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¾“å‡ºåŒºåŸŸ / ç»Ÿè®¡ç»“æœ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç¤ºä¾‹å·¥å…·**:
- Word Counter: æ–‡æœ¬ç»Ÿè®¡
- Case Converter: å¤§å°å†™è½¬æ¢
- Text Diff Checker: æ–‡æœ¬å¯¹æ¯”
- Lorem Ipsum Generator: æ–‡æœ¬ç”Ÿæˆ

**é€šç”¨ Props**:
```typescript
interface TextToolProps {
  labels?: {
    title: string;
    inputPlaceholder: string;
    outputLabel: string;
  };
  initialText?: string;
}
```

---

#### 2ï¸âƒ£ æ–‡ä»¶å·¥å…· (File Tools)

**ç‰¹ç‚¹**: ä¸Šä¼ æ–‡ä»¶ â†’ å¤„ç† â†’ ä¸‹è½½ç»“æœ

**å…¸å‹ç»„ä»¶ç»“æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ ‡é¢˜ + å‰¯æ ‡é¢˜                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ (Dropzone)         â”‚
â”‚  [æ”¯æŒæ‹–æ‹½ä¸Šä¼ ]                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ–‡ä»¶åˆ—è¡¨ + è¿›åº¦æ¡               â”‚
â”‚  [å¤„ç†æŒ‰é’®] [ä¸‹è½½æŒ‰é’®]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç¤ºä¾‹å·¥å…·**:
- PDF Merger: åˆå¹¶ PDF
- PDF to Image: PDF è½¬å›¾ç‰‡
- File Compressor: æ–‡ä»¶å‹ç¼©
- CSV to JSON: æ ¼å¼è½¬æ¢

**é€šç”¨ Props**:
```typescript
interface FileToolProps {
  labels?: {
    title: string;
    uploadPrompt: string;
    processButton: string;
  };
  acceptedFormats?: string[];      // ['.pdf', '.png', '.jpg']
  maxFileSize?: number;             // å•ä½: MB
  maxFiles?: number;                // æœ€å¤§æ–‡ä»¶æ•°
}
```

**å¿…é¡»ä½¿ç”¨çš„åº“**:
- `react-dropzone`: æ–‡ä»¶æ‹–æ‹½ä¸Šä¼ 

---

#### 3ï¸âƒ£ å›¾åƒå·¥å…· (Image Tools)

**ç‰¹ç‚¹**: ä¸Šä¼ å›¾ç‰‡ â†’ é¢„è§ˆ/ç¼–è¾‘ â†’ ä¸‹è½½ç»“æœ

**å…¸å‹ç»„ä»¶ç»“æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ ‡é¢˜ + å‰¯æ ‡é¢˜                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å›¾ç‰‡ä¸Šä¼ /é¢„è§ˆåŒºåŸŸ               â”‚
â”‚  [Canvas æˆ– Image ç»„ä»¶]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å‚æ•°è°ƒæ•´é¢æ¿                    â”‚
â”‚  æ»‘å—ã€æŒ‰é’®ç­‰æ§åˆ¶                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ä¸‹è½½æŒ‰é’®] [é‡ç½®æŒ‰é’®]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç¤ºä¾‹å·¥å…·**:
- Image Compressor: å›¾ç‰‡å‹ç¼©
- Image Resizer: å°ºå¯¸è°ƒæ•´
- Image Cropper: è£å‰ªå·¥å…·
- QR Code Generator: äºŒç»´ç ç”Ÿæˆ

**é€šç”¨ Props**:
```typescript
interface ImageToolProps {
  labels?: {
    title: string;
    uploadPrompt: string;
    downloadButton: string;
  };
  outputFormat?: 'png' | 'jpg' | 'webp';
  quality?: number;                 // 0-100
}
```

**å¯èƒ½éœ€è¦çš„åº“**:
- `react-easy-crop`: å›¾ç‰‡è£å‰ª
- `qrcode`: äºŒç»´ç ç”Ÿæˆ
- `browser-image-compression`: å›¾ç‰‡å‹ç¼©

---

#### 4ï¸âƒ£ ç”Ÿæˆå·¥å…· (Generate Tools)

**ç‰¹ç‚¹**: é…ç½®å‚æ•° â†’ ç”Ÿæˆç»“æœ â†’ å¤åˆ¶/ä¸‹è½½

**å…¸å‹ç»„ä»¶ç»“æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ ‡é¢˜ + å‰¯æ ‡é¢˜                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å‚æ•°é…ç½®é¢æ¿                    â”‚
â”‚  å¤é€‰æ¡†ã€æ»‘å—ã€ä¸‹æ‹‰æ¡†ç­‰          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç”Ÿæˆç»“æœå±•ç¤º                    â”‚
â”‚  [å¤åˆ¶æŒ‰é’®] [é‡æ–°ç”Ÿæˆ]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç¤ºä¾‹å·¥å…·**:
- Password Generator: å¯†ç ç”Ÿæˆ
- UUID Generator: UUID ç”Ÿæˆ
- Gradient Generator: æ¸å˜ç”Ÿæˆ
- Fake Data Generator: æµ‹è¯•æ•°æ®ç”Ÿæˆ

**é€šç”¨ Props**:
```typescript
interface GenerateToolProps {
  labels?: {
    title: string;
    generateButton: string;
    copyButton: string;
  };
  autoGenerate?: boolean;           // è‡ªåŠ¨ç”Ÿæˆ
}
```

---

#### 5ï¸âƒ£ å¼€å‘è€…å·¥å…· (Developer Tools)

**ç‰¹ç‚¹**: è¾“å…¥ä»£ç /æ•°æ® â†’ æ ¼å¼åŒ–/è½¬æ¢ â†’ è¾“å‡ºç»“æœ

**å…¸å‹ç»„ä»¶ç»“æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ ‡é¢˜ + å‰¯æ ‡é¢˜                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¾“å…¥ç¼–è¾‘å™¨ (Monaco/Textarea)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [æ ¼å¼åŒ–] [éªŒè¯] [è½¬æ¢]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¾“å‡ºç¼–è¾‘å™¨/ç»“æœå±•ç¤º             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç¤ºä¾‹å·¥å…·**:
- JSON Formatter: JSON æ ¼å¼åŒ–
- Base64 Encoder: Base64 ç¼–ç 
- Regex Tester: æ­£åˆ™æµ‹è¯•
- Code Beautifier: ä»£ç ç¾åŒ–

**é€šç”¨ Props**:
```typescript
interface DevToolProps {
  labels?: {
    title: string;
    inputLabel: string;
    outputLabel: string;
  };
  language?: string;                // 'json' | 'javascript' | 'html'
  readOnly?: boolean;               // è¾“å‡ºæ˜¯å¦åªè¯»
}
```

**å¯èƒ½éœ€è¦çš„åº“**:
- `@monaco-editor/react`: ä»£ç ç¼–è¾‘å™¨ï¼ˆé«˜çº§å·¥å…·ï¼‰
- `prismjs`: ä»£ç é«˜äº®ï¼ˆç®€å•å±•ç¤ºï¼‰

---

## æ ·å¼è§„èŒƒ

### å“åº”å¼å¸ƒå±€æ–­ç‚¹

```typescript
// ä½¿ç”¨ Tailwind æ–­ç‚¹
const breakpoints = {
  sm: '640px',   // ç§»åŠ¨ç«¯
  md: '768px',   // å¹³æ¿
  lg: '1024px',  // æ¡Œé¢ç«¯
  xl: '1280px',  // å¤§å±å¹•
  '2xl': '1536px'
};

// ç¤ºä¾‹ï¼šå“åº”å¼ç½‘æ ¼
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  {/* ç§»åŠ¨ç«¯1åˆ—ï¼Œå¹³æ¿2åˆ—ï¼Œæ¡Œé¢3åˆ— */}
</div>
```

### é…è‰²æ–¹æ¡ˆ

| å…ƒç´  | é¢œè‰² | Tailwind ç±»å | ä½¿ç”¨åœºæ™¯ |
|------|------|--------------|---------|
| **ä¸»èƒŒæ™¯** | ç°è‰²50 | `bg-gray-50` | é¡µé¢èƒŒæ™¯ |
| **å¡ç‰‡èƒŒæ™¯** | ç™½è‰² | `bg-white` | å¡ç‰‡ã€é¢æ¿ |
| **ä¸»æ ‡é¢˜** | ä¸­æ€§è‰²900 | `text-neutral-900` | H1 æ ‡é¢˜ |
| **å‰¯æ ‡é¢˜** | ç°è‰²600 | `text-gray-600` | H2ã€è¯´æ˜æ–‡å­— |
| **ä¸»è‰²è°ƒ** | ç¿ ç»¿è‰² | `text-primary` | é‡è¦æ•°æ®ã€å›¾æ ‡ |
| **å¼ºè°ƒè‰²** | æ©™è‰² | `text-accent` | é«˜äº®ã€è­¦å‘Š |
| **è¾¹æ¡†** | ç°è‰²300 | `border-gray-300` | è¾“å…¥æ¡†ã€åˆ†å‰²çº¿ |
| **æˆåŠŸ** | ç»¿è‰² | `text-green-600` | æˆåŠŸæç¤º |
| **é”™è¯¯** | çº¢è‰² | `text-red-600` | é”™è¯¯æç¤º |

### é—´è·è§„èŒƒ

```typescript
// ä½¿ç”¨ Tailwind é—´è·
const spacing = {
  container: 'px-4 md:px-6 lg:px-8',      // å®¹å™¨å†…è¾¹è·
  section: 'py-8 md:py-12',                // åŒºå—ä¸Šä¸‹é—´è·
  card: 'p-6',                             // å¡ç‰‡å†…è¾¹è·
  gap: 'gap-4',                            // ç½‘æ ¼é—´è·
  button: 'px-4 py-2',                     // æŒ‰é’®å†…è¾¹è·
};
```

### é˜´å½±å’Œåœ†è§’

```typescript
// é˜´å½±
shadow-sm      // å°é˜´å½±ï¼ˆè¾“å…¥æ¡†ï¼‰
shadow-md      // ä¸­ç­‰é˜´å½±ï¼ˆå¡ç‰‡ï¼‰
shadow-lg      // å¤§é˜´å½±ï¼ˆå¡ç‰‡æ‚¬åœï¼‰
shadow-xl      // è¶…å¤§é˜´å½±ï¼ˆå¼¹çª—ï¼‰

// åœ†è§’
rounded-lg     // å¤§åœ†è§’ï¼ˆå¡ç‰‡ã€æŒ‰é’®ï¼‰
rounded-md     // ä¸­åœ†è§’ï¼ˆè¾“å…¥æ¡†ï¼‰
rounded-full   // å®Œå…¨åœ†è§’ï¼ˆå¾½ç« ã€å¤´åƒï¼‰
```

---

## å¼€å‘æµç¨‹

### ç¬¬1æ­¥: é¡¹ç›®è§„åˆ’

#### 1.1 ç¡®å®šå·¥å…·ä¿¡æ¯

ä» `toolibox/frontend/src/data/tools.json` æŸ¥æ‰¾ä½ çš„å·¥å…·ï¼š

```json
{
  "id": "word-counter",              // â† å·¥å…· ID
  "slug": "word-counter",            // â† URL slug
  "categoryId": "text-tools",        // â† åˆ†ç±» ID
  "icon": "ğŸ“Š",                      // â† å›¾æ ‡
  "name": {
    "en": "Word Counter",
    "zh": "å­—æ•°ç»Ÿè®¡å·¥å…·"
  },
  "description": {
    "en": "Count words, characters, and more",
    "zh": "ç»Ÿè®¡å­—æ•°ã€å­—ç¬¦æ•°ç­‰ä¿¡æ¯"
  },
  "comingSoon": true                 // â† å¼€å‘å®Œæˆåæ”¹ä¸º false
}
```

#### 1.2 å®šä¹‰åŠŸèƒ½éœ€æ±‚

åˆ›å»ºä¸€ä¸ªéœ€æ±‚æ–‡æ¡£ï¼ˆå¯ä»¥æ˜¯ Markdown æˆ–æ–‡æœ¬æ–‡ä»¶ï¼‰ï¼š

```markdown
# {å·¥å…·åç§°} åŠŸèƒ½éœ€æ±‚

## åŸºç¡€åŠŸèƒ½
- [ ] åŠŸèƒ½ç‚¹1
- [ ] åŠŸèƒ½ç‚¹2
- [ ] åŠŸèƒ½ç‚¹3

## é«˜çº§åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰
- [ ] åŠŸèƒ½ç‚¹4
- [ ] åŠŸèƒ½ç‚¹5

## UI å¸ƒå±€
[è‰å›¾æˆ–æè¿°]

## æŠ€æœ¯é€‰å‹
- æ˜¯å¦éœ€è¦æ–‡ä»¶ä¸Šä¼ ï¼Ÿ
- æ˜¯å¦éœ€è¦ Canvasï¼Ÿ
- æ˜¯å¦éœ€è¦å¤–éƒ¨åº“ï¼Ÿ
```

### ç¬¬2æ­¥: åˆ›å»ºé¡¹ç›®

```bash
# ä½¿ç”¨å·¥å…·çš„ slug ä½œä¸ºé¡¹ç›®å
npm create vite@latest {slug}-dev -- --template react-ts

# ç¤ºä¾‹:
# npm create vite@latest word-counter-dev -- --template react-ts
# npm create vite@latest json-formatter-dev -- --template react-ts
```

### ç¬¬3æ­¥: å®šä¹‰ç±»å‹

åˆ›å»º `src/types/{toolName}.ts`:

```typescript
/**
 * å·¥å…·æ•°æ®æ¥å£
 */
export interface ToolData {
  // æ ¹æ®å·¥å…·å®šä¹‰æ•°æ®ç»“æ„
  input: string;
  output: string;
  // ...
}

/**
 * ç»„ä»¶ Props
 */
export interface ToolProps {
  labels?: {
    title?: string;
    subtitle?: string;
    // ... æ‰€æœ‰éœ€è¦å›½é™…åŒ–çš„æ–‡æœ¬
  };
  initialValue?: string;
  theme?: 'light' | 'dark';
  // ... å…¶ä»–é…ç½®
}

/**
 * é»˜è®¤æ ‡ç­¾ï¼ˆè‹±æ–‡ï¼‰
 */
export const DEFAULT_LABELS = {
  title: 'Tool Name',
  subtitle: 'Tool description',
  // ...
};
```

### ç¬¬4æ­¥: å®ç°æ ¸å¿ƒé€»è¾‘

åˆ›å»º `src/utils/{toolName}.ts`:

```typescript
/**
 * æ ¸å¿ƒå¤„ç†å‡½æ•°
 */
export function processData(input: string): string {
  // å®ç°æ ¸å¿ƒé€»è¾‘
  // è¿™éƒ¨åˆ†åº”è¯¥æ˜¯çº¯å‡½æ•°ï¼Œä¸ä¾èµ–ç»„ä»¶çŠ¶æ€
  return output;
}

/**
 * éªŒè¯å‡½æ•°
 */
export function validateInput(input: string): boolean {
  // è¾“å…¥éªŒè¯
  return true;
}

/**
 * æ ¼å¼åŒ–å‡½æ•°
 */
export function formatOutput(data: any): string {
  // è¾“å‡ºæ ¼å¼åŒ–
  return formatted;
}
```

### ç¬¬5æ­¥: åˆ›å»ºå­ç»„ä»¶

æ ¹æ®å·¥å…·å¤æ‚åº¦ï¼Œæ‹†åˆ†ä¸ºå¤šä¸ªå­ç»„ä»¶ï¼š

```typescript
// src/components/InputSection.tsx
export function InputSection({ value, onChange, placeholder }: Props) {
  return (
    <div className="card">
      <textarea
        className="textarea-field"
        value={value}
        onChange={onChange}
        placeholder={placeholder}
      />
    </div>
  );
}

// src/components/OutputSection.tsx
export function OutputSection({ value, label }: Props) {
  return (
    <div className="card">
      <h3 className="text-lg font-semibold mb-2">{label}</h3>
      <pre className="bg-gray-100 p-4 rounded-lg">{value}</pre>
    </div>
  );
}
```

### ç¬¬6æ­¥: åˆ›å»ºä¸»ç»„ä»¶

åˆ›å»º `src/components/{ToolName}.tsx`:

```typescript
import { useState, useMemo } from 'react';
import { ToolProps, DEFAULT_LABELS } from '../types/{toolName}';
import { processData } from '../utils/{toolName}';

export default function ToolName({
  labels,
  initialValue = '',
}: ToolProps) {
  // åˆå¹¶æ ‡ç­¾
  const mergedLabels = useMemo(() => ({
    ...DEFAULT_LABELS,
    ...labels,
  }), [labels]);

  // çŠ¶æ€ç®¡ç†
  const [input, setInput] = useState(initialValue);

  // å®æ—¶è®¡ç®—/å¤„ç†
  const output = useMemo(() => processData(input), [input]);

  return (
    <div className="w-full max-w-6xl mx-auto px-4 py-8">
      {/* æ ‡é¢˜ */}
      <div className="text-center mb-8">
        <h1 className="text-4xl font-bold text-neutral-900 mb-2">
          {mergedLabels.title}
        </h1>
        <p className="text-lg text-gray-600">
          {mergedLabels.subtitle}
        </p>
      </div>

      {/* ä¸»è¦å†…å®¹ */}
      <div className="space-y-6">
        {/* è¾“å…¥åŒºåŸŸ */}
        {/* è¾“å‡ºåŒºåŸŸ */}
        {/* æ§åˆ¶æŒ‰é’® */}
      </div>
    </div>
  );
}
```

### ç¬¬7æ­¥: æµ‹è¯•è°ƒè¯•

```bash
npm run dev
```

æµ‹è¯•æ¸…å•ï¼š
- [ ] æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] è¾“å…¥éªŒè¯æ­£ç¡®
- [ ] è¾¹ç•Œæƒ…å†µå¤„ç†ï¼ˆç©ºè¾“å…¥ã€è¶…é•¿è¾“å…¥ç­‰ï¼‰
- [ ] å“åº”å¼å¸ƒå±€æ­£å¸¸
- [ ] æ—  TypeScript é”™è¯¯
- [ ] æ— æ§åˆ¶å°è­¦å‘Š

---

## æ¥å…¥ä¸»é¡¹ç›®æµç¨‹

### æ­¥éª¤1: å¤åˆ¶ç»„ä»¶

```bash
# åˆ›å»ºå·¥å…·ç»„ä»¶ç›®å½•
toolibox/frontend/src/components/tools/{ToolName}/

# å¤åˆ¶æ‰€æœ‰ç›¸å…³æ–‡ä»¶ï¼š
{tool-name}-dev/src/components/{ToolName}.tsx
  â†’ toolibox/frontend/src/components/tools/{ToolName}/index.tsx

{tool-name}-dev/src/components/*.tsx
  â†’ toolibox/frontend/src/components/tools/{ToolName}/

{tool-name}-dev/src/utils/{toolName}.ts
  â†’ toolibox/frontend/src/components/tools/{ToolName}/utils.ts

{tool-name}-dev/src/types/{toolName}.ts
  â†’ toolibox/frontend/src/components/tools/{ToolName}/types.ts
```

### æ­¥éª¤2: åˆ›å»ºé¡µé¢

åˆ›å»º `toolibox/frontend/src/app/[locale]/tools/{slug}/page.tsx`:

```typescript
import { useTranslations } from 'next-intl';
import { getTranslations } from 'next-intl/server';
import Header from '@/components/layout/Header';
import Footer from '@/components/layout/Footer';
import ToolName from '@/components/tools/{ToolName}';

// ç”Ÿæˆé¡µé¢å…ƒæ•°æ®ï¼ˆSEOï¼‰
export async function generateMetadata({
  params: { locale }
}: {
  params: { locale: string }
}) {
  const t = await getTranslations({
    locale,
    namespace: 'tools.{toolSlug}'
  });

  return {
    title: `${t('title')} - TooliBox`,
    description: t('subtitle'),
  };
}

export default function ToolPage() {
  const t = useTranslations('tools.{toolSlug}');

  // å›½é™…åŒ–æ–‡æœ¬æ ‡ç­¾
  const labels = {
    title: t('title'),
    subtitle: t('subtitle'),
    // ... æ˜ å°„æ‰€æœ‰æ–‡æœ¬
  };

  return (
    <div className="flex flex-col min-h-screen">
      <Header />
      <main className="flex-1">
        <ToolName labels={labels} />
      </main>
      <Footer />
    </div>
  );
}
```

### æ­¥éª¤3: æ·»åŠ å›½é™…åŒ–ç¿»è¯‘

#### `toolibox/frontend/src/locales/en.json`

```json
{
  "tools": {
    "{toolSlug}": {
      "title": "Tool Name",
      "subtitle": "Tool description",
      "inputPlaceholder": "Enter your input...",
      // ... æ‰€æœ‰æ–‡æœ¬çš„è‹±æ–‡ç¿»è¯‘
    }
  }
}
```

#### `toolibox/frontend/src/locales/zh.json`

```json
{
  "tools": {
    "{toolSlug}": {
      "title": "å·¥å…·åç§°",
      "subtitle": "å·¥å…·æè¿°",
      "inputPlaceholder": "è¯·è¾“å…¥...",
      // ... æ‰€æœ‰æ–‡æœ¬çš„ä¸­æ–‡ç¿»è¯‘
    }
  }
}
```

### æ­¥éª¤4: æ›´æ–°å·¥å…·é…ç½®

ç¼–è¾‘ `toolibox/frontend/src/data/tools.json`:

```json
{
  "id": "{tool-id}",
  "slug": "{slug}",
  "categoryId": "{category-id}",
  "icon": "ğŸ“Š",
  "name": {
    "en": "Tool Name",
    "zh": "å·¥å…·åç§°"
  },
  "description": {
    "en": "Tool description",
    "zh": "å·¥å…·æè¿°"
  },
  "comingSoon": false  // â† æ”¹ä¸º false
}
```

### æ­¥éª¤5: æœ¬åœ°æµ‹è¯•

```bash
cd toolibox/frontend
npm run dev
```

æµ‹è¯•æ£€æŸ¥æ¸…å•ï¼š
- [ ] è®¿é—® `/en/tools/{slug}` æ­£å¸¸
- [ ] è®¿é—® `/zh/tools/{slug}` æ­£å¸¸
- [ ] è¯­è¨€åˆ‡æ¢æ­£å¸¸
- [ ] ä»ä¸»é¡µç‚¹å‡»è·³è½¬æ­£å¸¸
- [ ] æ‰€æœ‰åŠŸèƒ½æ­£å¸¸
- [ ] å“åº”å¼å¸ƒå±€æ­£å¸¸

---

## æµ‹è¯•è§„èŒƒ

### åŠŸèƒ½æµ‹è¯•æ¸…å•

```markdown
## åŸºç¡€åŠŸèƒ½æµ‹è¯•
- [ ] è¾“å…¥åŠŸèƒ½æ­£å¸¸
- [ ] è¾“å‡ºæ˜¾ç¤ºæ­£ç¡®
- [ ] æŒ‰é’®å“åº”æ­£å¸¸
- [ ] å¤åˆ¶åŠŸèƒ½å·¥ä½œ

## è¾¹ç•Œæµ‹è¯•
- [ ] ç©ºè¾“å…¥å¤„ç†
- [ ] è¶…é•¿è¾“å…¥å¤„ç†
- [ ] ç‰¹æ®Šå­—ç¬¦å¤„ç†
- [ ] æ— æ•ˆè¾“å…¥æç¤º

## æ€§èƒ½æµ‹è¯•
- [ ] å¤§æ•°æ®å¤„ç†æµç•…
- [ ] å†…å­˜å ç”¨åˆç†
- [ ] æ— å†…å­˜æ³„æ¼

## å…¼å®¹æ€§æµ‹è¯•
- [ ] Chrome æµ‹è¯•é€šè¿‡
- [ ] Firefox æµ‹è¯•é€šè¿‡
- [ ] Safari æµ‹è¯•é€šè¿‡
- [ ] ç§»åŠ¨ç«¯æµ‹è¯•é€šè¿‡

## å›½é™…åŒ–æµ‹è¯•
- [ ] ä¸­æ–‡æ˜¾ç¤ºæ­£ç¡®
- [ ] è‹±æ–‡æ˜¾ç¤ºæ­£ç¡®
- [ ] åˆ‡æ¢è¯­è¨€æ­£å¸¸

## å“åº”å¼æµ‹è¯•
- [ ] æ‰‹æœºç«¯ï¼ˆ< 640pxï¼‰
- [ ] å¹³æ¿ç«¯ï¼ˆ640-1024pxï¼‰
- [ ] æ¡Œé¢ç«¯ï¼ˆ> 1024pxï¼‰
```

---

## éƒ¨ç½²æŒ‡å—

### æ­¥éª¤1: æäº¤ä»£ç 

```bash
# è¿›å…¥ä¸»é¡¹ç›®ç›®å½•
cd toolibox

# æ·»åŠ æ‰€æœ‰æ–°æ–‡ä»¶
git add frontend/src/components/tools/{ToolName}/
git add frontend/src/app/[locale]/tools/{slug}/
git add frontend/src/data/tools.json
git add frontend/src/locales/en.json
git add frontend/src/locales/zh.json

# æäº¤
git commit -m "feat: add {Tool Name} tool"

# æ¨é€
git push origin main
```

### æ­¥éª¤2: VPS éƒ¨ç½²

```bash
# SSH ç™»å½• VPS
ssh root@YOUR_VPS_IP

# è¿›å…¥å‰ç«¯ç›®å½•
cd /var/www/toolibox/frontend

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœæœ‰æ–°ä¾èµ–ï¼‰
npm install --production

# é‡æ–°æ„å»º
npm run build

# é‡å¯ PM2 è¿›ç¨‹
pm2 restart toolibox-frontend

# æŸ¥çœ‹æ—¥å¿—
pm2 logs toolibox-frontend --lines 20
```

### æ­¥éª¤3: éªŒè¯éƒ¨ç½²

```bash
# æ£€æŸ¥ PM2 çŠ¶æ€
pm2 status

# æµ‹è¯•å‰ç«¯è®¿é—®
curl -I https://yourdomain.com/en/tools/{slug}
curl -I https://yourdomain.com/zh/tools/{slug}

# é¢„æœŸè¿”å›: HTTP/1.1 200 OK
```

---

## å·¥å…·å¼€å‘ç¤ºä¾‹

### ç¤ºä¾‹1: Word Counter (æ–‡æœ¬å·¥å…·)

**ç±»å‹**: çº¯å‰ç«¯è®¡ç®—å·¥å…·
**å¤æ‚åº¦**: ç®€å•
**å¼€å‘æ—¶é—´**: 2-4å°æ—¶

**æ ¸å¿ƒæ–‡ä»¶**:
```
src/
â”œâ”€â”€ types/wordCounter.ts       # ç±»å‹å®šä¹‰
â”œâ”€â”€ utils/textAnalyzer.ts      # æ–‡æœ¬åˆ†æé€»è¾‘
â””â”€â”€ components/
    â”œâ”€â”€ WordCounter.tsx        # ä¸»ç»„ä»¶
    â””â”€â”€ StatCard.tsx           # ç»Ÿè®¡å¡ç‰‡
```

**å…³é”®ä»£ç **:
```typescript
// utils/textAnalyzer.ts
export function analyzeText(text: string) {
  const wordCount = text.trim().split(/\s+/).filter(Boolean).length;
  const charCount = text.length;
  return { wordCount, charCount };
}
```

---

### ç¤ºä¾‹2: JSON Formatter (å¼€å‘è€…å·¥å…·)

**ç±»å‹**: æ•°æ®æ ¼å¼åŒ–å·¥å…·
**å¤æ‚åº¦**: ä¸­ç­‰
**å¼€å‘æ—¶é—´**: 4-6å°æ—¶

**æ ¸å¿ƒæ–‡ä»¶**:
```
src/
â”œâ”€â”€ types/jsonFormatter.ts
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ jsonParser.ts          # JSON è§£æ
â”‚   â””â”€â”€ jsonValidator.ts       # JSON éªŒè¯
â””â”€â”€ components/
    â”œâ”€â”€ JsonFormatter.tsx      # ä¸»ç»„ä»¶
    â”œâ”€â”€ JsonInput.tsx          # è¾“å…¥ç¼–è¾‘å™¨
    â””â”€â”€ JsonOutput.tsx         # è¾“å‡ºå±•ç¤º
```

**å…³é”®é€»è¾‘**:
```typescript
// utils/jsonParser.ts
export function formatJson(input: string, indent: number = 2): string {
  try {
    const parsed = JSON.parse(input);
    return JSON.stringify(parsed, null, indent);
  } catch (error) {
    throw new Error('Invalid JSON');
  }
}
```

---

### ç¤ºä¾‹3: Image Compressor (å›¾åƒå·¥å…·)

**ç±»å‹**: æ–‡ä»¶å¤„ç†å·¥å…·
**å¤æ‚åº¦**: è¾ƒé«˜
**å¼€å‘æ—¶é—´**: 8-12å°æ—¶

**æ ¸å¿ƒæ–‡ä»¶**:
```
src/
â”œâ”€â”€ types/imageCompressor.ts
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ imageProcessor.ts      # å›¾ç‰‡å‹ç¼©é€»è¾‘
â”‚   â””â”€â”€ fileValidator.ts       # æ–‡ä»¶éªŒè¯
â””â”€â”€ components/
    â”œâ”€â”€ ImageCompressor.tsx    # ä¸»ç»„ä»¶
    â”œâ”€â”€ ImageUploader.tsx      # ä¸Šä¼ ç»„ä»¶
    â”œâ”€â”€ ImagePreview.tsx       # é¢„è§ˆç»„ä»¶
    â””â”€â”€ CompressionControls.tsx # æ§åˆ¶é¢æ¿
```

**éœ€è¦çš„åº“**:
```bash
npm install react-dropzone browser-image-compression
```

**å…³é”®é€»è¾‘**:
```typescript
import imageCompression from 'browser-image-compression';

export async function compressImage(
  file: File,
  quality: number
): Promise<Blob> {
  const options = {
    maxSizeMB: 1,
    maxWidthOrHeight: 1920,
    useWebWorker: true,
    quality: quality / 100,
  };

  return await imageCompression(file, options);
}
```

---

## å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•é€‰æ‹©å¤–éƒ¨åº“ï¼Ÿ

**A**: éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š
1. âœ… ä¼˜å…ˆä½¿ç”¨åŸç”Ÿ JavaScript/Browser API
2. âœ… é€‰æ‹©ç»´æŠ¤æ´»è·ƒã€Star æ•°é«˜çš„åº“
3. âœ… æ£€æŸ¥åº“çš„å¤§å°ï¼ˆé¿å…è¿‡å¤§çš„åº“ï¼‰
4. âœ… ç¡®ä¿åº“æ”¯æŒ TypeScript

### Q2: ç»„ä»¶å¤ªå¤§å¦‚ä½•æ‹†åˆ†ï¼Ÿ

**A**: æ‹†åˆ†å»ºè®®ï¼š
- å•ä¸ªæ–‡ä»¶è¶…è¿‡ 300 è¡Œ â†’ æ‹†åˆ†
- ç‹¬ç«‹çš„ UI æ¨¡å— â†’ å­ç»„ä»¶
- å¯å¤ç”¨çš„é€»è¾‘ â†’ å·¥å…·å‡½æ•°
- å¯å¤ç”¨çš„UI â†’ é€šç”¨ç»„ä»¶

### Q3: å¦‚ä½•å¤„ç†å¤§æ–‡ä»¶ä¸Šä¼ ï¼Ÿ

**A**:
1. ä½¿ç”¨ `react-dropzone` é™åˆ¶æ–‡ä»¶å¤§å°
2. æ˜¾ç¤ºä¸Šä¼ è¿›åº¦
3. ä½¿ç”¨ Web Worker å¤„ç†ï¼ˆé¿å…é˜»å¡UIï¼‰
4. è€ƒè™‘åˆ†ç‰‡ä¸Šä¼ ï¼ˆè¶…å¤§æ–‡ä»¶ï¼‰

### Q4: å¦‚ä½•ä¼˜åŒ–æ€§èƒ½ï¼Ÿ

**A**:
- ä½¿ç”¨ `useMemo` ç¼“å­˜è®¡ç®—ç»“æœ
- ä½¿ç”¨ `useCallback` ç¼“å­˜å‡½æ•°
- é¿å…åœ¨ render ä¸­åˆ›å»ºæ–°å¯¹è±¡/æ•°ç»„
- å¤§æ•°æ®å¤„ç†ä½¿ç”¨ Web Worker
- å›¾ç‰‡å¤„ç†ä½¿ç”¨ Canvas + OffscreenCanvas

### Q5: å¦‚ä½•å¤„ç†é”™è¯¯ï¼Ÿ

**A**: ç»Ÿä¸€é”™è¯¯å¤„ç†æ¨¡å¼ï¼š
```typescript
const [error, setError] = useState<string | null>(null);

try {
  const result = processData(input);
  setError(null);
} catch (err) {
  setError(err.message);
}

// UI æ˜¾ç¤º
{error && (
  <div className="bg-red-100 text-red-800 p-4 rounded-lg">
    {error}
  </div>
)}
```

---

## æ€»ç»“

### å¼€å‘æµç¨‹æ€»è§ˆ

```
1. ç¡®å®šå·¥å…·ä¿¡æ¯ï¼ˆä» tools.jsonï¼‰
   â†“
2. åˆ›å»ºç‹¬ç«‹é¡¹ç›®ï¼ˆVite + React + TSï¼‰
   â†“
3. é…ç½® Tailwindï¼ˆä¸ä¸»é¡¹ç›®ä¸€è‡´ï¼‰
   â†“
4. å®šä¹‰ç±»å‹å’Œæ¥å£
   â†“
5. å®ç°æ ¸å¿ƒé€»è¾‘ï¼ˆå·¥å…·å‡½æ•°ï¼‰
   â†“
6. åˆ›å»ºç»„ä»¶ï¼ˆä¸»ç»„ä»¶ + å­ç»„ä»¶ï¼‰
   â†“
7. æœ¬åœ°æµ‹è¯•ï¼ˆåŠŸèƒ½ã€è¾¹ç•Œã€å“åº”å¼ï¼‰
   â†“
8. å¤åˆ¶åˆ°ä¸»é¡¹ç›®
   â†“
9. åˆ›å»ºé¡µé¢å’Œè·¯ç”±
   â†“
10. æ·»åŠ å›½é™…åŒ–ç¿»è¯‘
    â†“
11. æ›´æ–°å·¥å…·é…ç½®
    â†“
12. ä¸»é¡¹ç›®æµ‹è¯•
    â†“
13. Git æäº¤
    â†“
14. VPS éƒ¨ç½²
    â†“
15. ç”Ÿäº§éªŒè¯
```

### å…³é”®è¦ç‚¹

| é˜¶æ®µ | è¦ç‚¹ |
|------|------|
| **ç‹¬ç«‹å¼€å‘** | âœ… ç»„ä»¶è‡ªåŒ…å«ã€é›¶ä¾èµ–ã€Props é©±åŠ¨ |
| **æ ·å¼** | âœ… ä½¿ç”¨ Tailwindã€ä¸ä¸»é¡¹ç›®é…ç½®ä¸€è‡´ |
| **å›½é™…åŒ–** | âœ… Props ä¼ å…¥æ ‡ç­¾ã€é»˜è®¤è‹±æ–‡ |
| **æµ‹è¯•** | âœ… åŠŸèƒ½ã€è¾¹ç•Œã€å“åº”å¼å…¨æµ‹è¯• |
| **æ¥å…¥** | âœ… å¤åˆ¶ç²˜è´´ã€åˆ›å»ºé¡µé¢ã€æ·»åŠ ç¿»è¯‘ |
| **éƒ¨ç½²** | âœ… Git æäº¤ã€VPS æ‹‰å–ã€PM2 é‡å¯ |

---

## é™„å½•ï¼šå¿«é€Ÿå‚è€ƒ

### å·¥å…·åˆ†ç±»é€ŸæŸ¥è¡¨

| åˆ†ç±» | categoryId | å…¸å‹æ¨¡å¼ | ç¤ºä¾‹å·¥å…· |
|------|-----------|---------|---------|
| æ–‡æœ¬å·¥å…· | `text-tools` | è¾“å…¥â†’å¤„ç†â†’è¾“å‡º | Word Counter, Case Converter |
| æ–‡ä»¶å·¥å…· | `file-tools` | ä¸Šä¼ â†’å¤„ç†â†’ä¸‹è½½ | PDF Merger, File Compressor |
| å›¾åƒå·¥å…· | `image-tools` | ä¸Šä¼ â†’ç¼–è¾‘â†’ä¸‹è½½ | Image Resizer, QR Generator |
| ç”Ÿæˆå·¥å…· | `generate-tools` | é…ç½®â†’ç”Ÿæˆâ†’å¤åˆ¶ | Password Generator, UUID |
| å¼€å‘å·¥å…· | `developer-tools` | è¾“å…¥â†’æ ¼å¼åŒ–â†’è¾“å‡º | JSON Formatter, Base64 Encoder |

### å¸¸ç”¨åº“æ¨è

| ç”¨é€” | åº“å | å®‰è£…å‘½ä»¤ |
|------|------|---------|
| æ–‡ä»¶ä¸Šä¼  | react-dropzone | `npm i react-dropzone` |
| å›¾ç‰‡å‹ç¼© | browser-image-compression | `npm i browser-image-compression` |
| å›¾ç‰‡è£å‰ª | react-easy-crop | `npm i react-easy-crop` |
| äºŒç»´ç  | qrcode | `npm i qrcode` |
| ä»£ç ç¼–è¾‘å™¨ | @monaco-editor/react | `npm i @monaco-editor/react` |
| æ—¥æœŸå¤„ç† | date-fns | `npm i date-fns` |
| æ–‡ä»¶ä¸‹è½½ | file-saver | `npm i file-saver` |

---

**ç‰ˆæœ¬å†å²**:
- v1.1 (2025-12-11): æ–°å¢å‰åç«¯åˆ†ç¦»å·¥å…·å¼€å‘æŒ‡å—ã€å¤–éƒ¨ AI API æ¥å…¥æŒ‡å—
- v1.0 (2025-12-10): åˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å«å®Œæ•´å¼€å‘æµç¨‹

**ç»´æŠ¤è€…**: TooliBox å¼€å‘å›¢é˜Ÿ

**ç¥å¼€å‘é¡ºåˆ©ï¼** ğŸš€

---

## å‰åç«¯åˆ†ç¦»å·¥å…·å¼€å‘æŒ‡å—

> æœ¬ç« èŠ‚é€‚ç”¨äºéœ€è¦åç«¯ API æ”¯æŒçš„å·¥å…·ï¼Œå¦‚ AI å·¥å…·ã€æ•°æ®å¤„ç†å·¥å…·ã€éœ€è¦æœåŠ¡ç«¯è®¡ç®—çš„å·¥å…·ç­‰ã€‚

### å·¥å…·ç±»å‹åˆ¤æ–­

é¦–å…ˆåˆ¤æ–­ä½ çš„å·¥å…·å±äºå“ªç§ç±»å‹ï¼š

| ç±»å‹ | ç‰¹ç‚¹ | ç¤ºä¾‹ | æ˜¯å¦éœ€è¦åç«¯ |
|------|------|------|-------------|
| **çº¯å‰ç«¯å·¥å…·** | æ‰€æœ‰è®¡ç®—åœ¨æµè§ˆå™¨å®Œæˆ | Word Counter, JSON Formatter | âŒ ä¸éœ€è¦ |
| **å‰åç«¯åˆ†ç¦»å·¥å…·** | éœ€è¦æœåŠ¡ç«¯å¤„ç†æˆ–å­˜å‚¨ | æ–‡ä»¶è½¬æ¢ã€æ•°æ®æŒä¹…åŒ– | âœ… éœ€è¦ |
| **AI å¢å¼ºå·¥å…·** | è°ƒç”¨å¤–éƒ¨ AI API | AI å†™ä½œã€æ™ºèƒ½ç¿»è¯‘ | âœ… éœ€è¦ |

### æ¶æ„è®¾è®¡åŸåˆ™

#### ä¸ºä»€ä¹ˆ AI API å¿…é¡»èµ°åç«¯ï¼Ÿ

```
âŒ é”™è¯¯åšæ³•ï¼šå‰ç«¯ç›´æ¥è°ƒç”¨ AI API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‰ç«¯    â”‚â”€â”€â”€â”€â†’â”‚ OpenAI API  â”‚
â”‚ (æš´éœ²Key)â”‚     â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
é—®é¢˜ï¼šAPI Key æš´éœ²åœ¨æµè§ˆå™¨ä¸­ï¼Œä»»ä½•äººéƒ½èƒ½çœ‹åˆ°å¹¶æ»¥ç”¨

âœ… æ­£ç¡®åšæ³•ï¼šé€šè¿‡åç«¯ä»£ç†
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‰ç«¯    â”‚â”€â”€â”€â”€â†’â”‚ åç«¯API â”‚â”€â”€â”€â”€â†’â”‚ OpenAI API  â”‚
â”‚         â”‚     â”‚ (å®‰å…¨å­˜å‚¨Key)â”‚ â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ä¼˜åŠ¿ï¼šAPI Key å®‰å…¨å­˜å‚¨åœ¨æœåŠ¡å™¨ï¼Œå‰ç«¯æ— æ³•è®¿é—®
```

#### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰ç«¯ (Next.js)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  å·¥å…·ç»„ä»¶ (React)                                    â”‚   â”‚
â”‚  â”‚  - ç”¨æˆ·ç•Œé¢                                          â”‚   â”‚
â”‚  â”‚  - çŠ¶æ€ç®¡ç†                                          â”‚   â”‚
â”‚  â”‚  - è°ƒç”¨ /api/tools/{tool-name} æ¥å£                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼ HTTP è¯·æ±‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åç«¯ (Express)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  å·¥å…·è·¯ç”± /api/tools/{tool-name}                     â”‚   â”‚
â”‚  â”‚  - è¯·æ±‚éªŒè¯                                          â”‚   â”‚
â”‚  â”‚  - è°ƒç”¨ AI æœåŠ¡                                      â”‚   â”‚
â”‚  â”‚  - è¿”å›å¤„ç†ç»“æœ                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                              â”‚
â”‚                              â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  AI æœåŠ¡å±‚                                           â”‚   â”‚
â”‚  â”‚  - API Key å®‰å…¨ç®¡ç†                                  â”‚   â”‚
â”‚  â”‚  - è¯·æ±‚å°è£…                                          â”‚   â”‚
â”‚  â”‚  - é”™è¯¯å¤„ç†                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼ å¤–éƒ¨ API è°ƒç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å¤–éƒ¨ AI æœåŠ¡                            â”‚
â”‚  OpenAI / Claude / DeepSeek / å…¶ä»– AI æœåŠ¡                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### åç«¯å¼€å‘è§„èŒƒ

#### ç›®å½•ç»“æ„

```
backend/src/
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ tools/
â”‚       â”œâ”€â”€ index.ts              # å·¥å…·è·¯ç”±èšåˆ
â”‚       â””â”€â”€ {tool-name}.ts        # å…·ä½“å·¥å…·è·¯ç”±
â”œâ”€â”€ controllers/
â”‚   â””â”€â”€ tools/
â”‚       â””â”€â”€ {tool-name}Controller.ts  # å·¥å…·æ§åˆ¶å™¨
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ ai/
â”‚   â”‚   â”œâ”€â”€ index.ts              # AI æœåŠ¡å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ openaiService.ts      # OpenAI æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ claudeService.ts      # Claude æœåŠ¡
â”‚   â”‚   â””â”€â”€ deepseekService.ts    # DeepSeek æœåŠ¡
â”‚   â””â”€â”€ tools/
â”‚       â””â”€â”€ {tool-name}Service.ts # å·¥å…·ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ config/
â”‚   â””â”€â”€ ai.ts                     # AI é…ç½®
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ auth.ts                   # è®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ rateLimit.ts              # é€Ÿç‡é™åˆ¶
â”‚   â””â”€â”€ validateRequest.ts        # è¯·æ±‚éªŒè¯
â””â”€â”€ types/
    â””â”€â”€ tools/
        â””â”€â”€ {tool-name}.ts        # å·¥å…·ç±»å‹å®šä¹‰
```

#### æ­¥éª¤1: åˆ›å»º AI æœåŠ¡é…ç½®

**`backend/src/config/ai.ts`**

```typescript
/**
 * AI æœåŠ¡é…ç½®
 * æ‰€æœ‰ API Key å¿…é¡»ä»ç¯å¢ƒå˜é‡è¯»å–ï¼Œç¦æ­¢ç¡¬ç¼–ç 
 */

export const aiConfig = {
  openai: {
    apiKey: process.env.OPENAI_API_KEY || '',
    baseUrl: process.env.OPENAI_BASE_URL || 'https://api.openai.com/v1',
    defaultModel: process.env.OPENAI_MODEL || 'gpt-4o-mini',
  },
  claude: {
    apiKey: process.env.CLAUDE_API_KEY || '',
    baseUrl: process.env.CLAUDE_BASE_URL || 'https://api.anthropic.com',
    defaultModel: process.env.CLAUDE_MODEL || 'claude-3-haiku-20240307',
  },
  deepseek: {
    apiKey: process.env.DEEPSEEK_API_KEY || '',
    baseUrl: process.env.DEEPSEEK_BASE_URL || 'https://api.deepseek.com/v1',
    defaultModel: process.env.DEEPSEEK_MODEL || 'deepseek-chat',
  },
};

/**
 * éªŒè¯ AI é…ç½®æ˜¯å¦æœ‰æ•ˆ
 */
export function validateAiConfig(provider: 'openai' | 'claude' | 'deepseek'): boolean {
  const config = aiConfig[provider];
  return !!(config.apiKey && config.baseUrl);
}
```

#### æ­¥éª¤2: åˆ›å»ºé€šç”¨ AI æœåŠ¡

**`backend/src/services/ai/openaiService.ts`**

```typescript
import axios from 'axios';
import { aiConfig } from '../../config/ai';

interface ChatMessage {
  role: 'system' | 'user' | 'assistant';
  content: string;
}

interface ChatCompletionOptions {
  model?: string;
  temperature?: number;
  maxTokens?: number;
  stream?: boolean;
}

interface ChatCompletionResponse {
  content: string;
  usage: {
    promptTokens: number;
    completionTokens: number;
    totalTokens: number;
  };
}

/**
 * OpenAI å…¼å®¹ API æœåŠ¡
 * æ”¯æŒ OpenAIã€DeepSeek ç­‰å…¼å®¹æ¥å£
 */
export class OpenAIService {
  private apiKey: string;
  private baseUrl: string;
  private defaultModel: string;

  constructor(
    apiKey: string = aiConfig.openai.apiKey,
    baseUrl: string = aiConfig.openai.baseUrl,
    defaultModel: string = aiConfig.openai.defaultModel
  ) {
    this.apiKey = apiKey;
    this.baseUrl = baseUrl;
    this.defaultModel = defaultModel;
  }

  /**
   * å‘é€èŠå¤©è¯·æ±‚
   */
  async chat(
    messages: ChatMessage[],
    options: ChatCompletionOptions = {}
  ): Promise<ChatCompletionResponse> {
    const {
      model = this.defaultModel,
      temperature = 0.7,
      maxTokens = 2000,
    } = options;

    try {
      const response = await axios.post(
        `${this.baseUrl}/chat/completions`,
        {
          model,
          messages,
          temperature,
          max_tokens: maxTokens,
        },
        {
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${this.apiKey}`,
          },
          timeout: 60000, // 60ç§’è¶…æ—¶
        }
      );

      const data = response.data;
      return {
        content: data.choices[0].message.content,
        usage: {
          promptTokens: data.usage.prompt_tokens,
          completionTokens: data.usage.completion_tokens,
          totalTokens: data.usage.total_tokens,
        },
      };
    } catch (error: any) {
      // ç»Ÿä¸€é”™è¯¯å¤„ç†
      if (error.response) {
        const status = error.response.status;
        const message = error.response.data?.error?.message || 'AI service error';

        if (status === 401) {
          throw new Error('AI API authentication failed. Check API key.');
        } else if (status === 429) {
          throw new Error('AI API rate limit exceeded. Please try again later.');
        } else if (status === 500) {
          throw new Error('AI service temporarily unavailable.');
        }
        throw new Error(`AI API error: ${message}`);
      }
      throw new Error('Failed to connect to AI service.');
    }
  }

  /**
   * æµå¼å“åº”ï¼ˆç”¨äºå®æ—¶è¾“å‡ºï¼‰
   */
  async chatStream(
    messages: ChatMessage[],
    options: ChatCompletionOptions = {},
    onChunk: (chunk: string) => void
  ): Promise<void> {
    const {
      model = this.defaultModel,
      temperature = 0.7,
      maxTokens = 2000,
    } = options;

    const response = await axios.post(
      `${this.baseUrl}/chat/completions`,
      {
        model,
        messages,
        temperature,
        max_tokens: maxTokens,
        stream: true,
      },
      {
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${this.apiKey}`,
        },
        responseType: 'stream',
        timeout: 120000,
      }
    );

    return new Promise((resolve, reject) => {
      response.data.on('data', (chunk: Buffer) => {
        const lines = chunk.toString().split('\n').filter(line => line.trim());
        for (const line of lines) {
          if (line.startsWith('data: ')) {
            const data = line.slice(6);
            if (data === '[DONE]') {
              resolve();
              return;
            }
            try {
              const parsed = JSON.parse(data);
              const content = parsed.choices[0]?.delta?.content;
              if (content) {
                onChunk(content);
              }
            } catch (e) {
              // å¿½ç•¥è§£æé”™è¯¯
            }
          }
        }
      });

      response.data.on('error', reject);
      response.data.on('end', resolve);
    });
  }
}

// å¯¼å‡ºé»˜è®¤å®ä¾‹
export const openaiService = new OpenAIService();

// å¯¼å‡º DeepSeek å®ä¾‹
export const deepseekService = new OpenAIService(
  aiConfig.deepseek.apiKey,
  aiConfig.deepseek.baseUrl,
  aiConfig.deepseek.defaultModel
);
```

#### æ­¥éª¤3: åˆ›å»ºå·¥å…·è·¯ç”±

**`backend/src/routes/tools/index.ts`**

```typescript
import { Router } from 'express';
import aiWriterRoutes from './ai-writer';
// å¯¼å…¥å…¶ä»–å·¥å…·è·¯ç”±...

const router = Router();

// æ³¨å†Œå·¥å…·è·¯ç”±
router.use('/ai-writer', aiWriterRoutes);
// router.use('/ai-translator', aiTranslatorRoutes);
// router.use('/other-tool', otherToolRoutes);

export default router;
```

**`backend/src/routes/tools/ai-writer.ts`**ï¼ˆç¤ºä¾‹ï¼‰

```typescript
import { Router } from 'express';
import {
  generateContent,
  improveContent,
  streamGenerateContent
} from '../../controllers/tools/aiWriterController';
import { validateRequest } from '../../middleware/validateRequest';
import { rateLimiter } from '../../middleware/rateLimit';

const router = Router();

// åº”ç”¨é€Ÿç‡é™åˆ¶
router.use(rateLimiter({
  windowMs: 60 * 1000, // 1åˆ†é’Ÿ
  max: 10, // æœ€å¤š10æ¬¡è¯·æ±‚
}));

// ç”Ÿæˆå†…å®¹
router.post('/generate', validateRequest, generateContent);

// æ”¹è¿›å†…å®¹
router.post('/improve', validateRequest, improveContent);

// æµå¼ç”Ÿæˆï¼ˆSSEï¼‰
router.get('/stream', streamGenerateContent);

export default router;
```

#### æ­¥éª¤4: åˆ›å»ºå·¥å…·æ§åˆ¶å™¨

**`backend/src/controllers/tools/aiWriterController.ts`**ï¼ˆç¤ºä¾‹ï¼‰

```typescript
import { Request, Response } from 'express';
import { openaiService } from '../../services/ai/openaiService';

interface GenerateRequest {
  prompt: string;
  style?: 'professional' | 'casual' | 'creative';
  length?: 'short' | 'medium' | 'long';
}

/**
 * ç”Ÿæˆå†…å®¹
 */
export const generateContent = async (req: Request, res: Response) => {
  try {
    const { prompt, style = 'professional', length = 'medium' } = req.body as GenerateRequest;

    // è¾“å…¥éªŒè¯
    if (!prompt || prompt.trim().length === 0) {
      return res.status(400).json({
        success: false,
        message: 'Prompt is required',
      });
    }

    if (prompt.length > 5000) {
      return res.status(400).json({
        success: false,
        message: 'Prompt too long (max 5000 characters)',
      });
    }

    // æ„å»ºç³»ç»Ÿæç¤º
    const systemPrompt = buildSystemPrompt(style, length);

    // è°ƒç”¨ AI æœåŠ¡
    const result = await openaiService.chat([
      { role: 'system', content: systemPrompt },
      { role: 'user', content: prompt },
    ], {
      temperature: style === 'creative' ? 0.9 : 0.7,
      maxTokens: length === 'long' ? 3000 : length === 'medium' ? 1500 : 500,
    });

    return res.status(200).json({
      success: true,
      data: {
        content: result.content,
        usage: result.usage,
      },
    });
  } catch (error: any) {
    console.error('AI Writer error:', error.message);
    return res.status(500).json({
      success: false,
      message: error.message || 'Failed to generate content',
    });
  }
};

/**
 * æ”¹è¿›å†…å®¹
 */
export const improveContent = async (req: Request, res: Response) => {
  try {
    const { content, instruction } = req.body;

    if (!content) {
      return res.status(400).json({
        success: false,
        message: 'Content is required',
      });
    }

    const result = await openaiService.chat([
      {
        role: 'system',
        content: 'You are a professional editor. Improve the given content based on the instruction.'
      },
      {
        role: 'user',
        content: `Content:\n${content}\n\nInstruction: ${instruction || 'Improve grammar and clarity'}`
      },
    ]);

    return res.status(200).json({
      success: true,
      data: {
        content: result.content,
        usage: result.usage,
      },
    });
  } catch (error: any) {
    console.error('AI Improve error:', error.message);
    return res.status(500).json({
      success: false,
      message: error.message || 'Failed to improve content',
    });
  }
};

/**
 * æµå¼ç”Ÿæˆï¼ˆSSEï¼‰
 */
export const streamGenerateContent = async (req: Request, res: Response) => {
  const { prompt } = req.query;

  if (!prompt || typeof prompt !== 'string') {
    return res.status(400).json({
      success: false,
      message: 'Prompt is required',
    });
  }

  // è®¾ç½® SSE å“åº”å¤´
  res.setHeader('Content-Type', 'text/event-stream');
  res.setHeader('Cache-Control', 'no-cache');
  res.setHeader('Connection', 'keep-alive');

  try {
    await openaiService.chatStream(
      [
        { role: 'system', content: 'You are a helpful writing assistant.' },
        { role: 'user', content: prompt },
      ],
      {},
      (chunk) => {
        res.write(`data: ${JSON.stringify({ content: chunk })}\n\n`);
      }
    );

    res.write('data: [DONE]\n\n');
    res.end();
  } catch (error: any) {
    res.write(`data: ${JSON.stringify({ error: error.message })}\n\n`);
    res.end();
  }
};

/**
 * æ„å»ºç³»ç»Ÿæç¤º
 */
function buildSystemPrompt(style: string, length: string): string {
  const styleGuide = {
    professional: 'Write in a professional, formal tone.',
    casual: 'Write in a friendly, conversational tone.',
    creative: 'Write in a creative, engaging tone with vivid descriptions.',
  };

  const lengthGuide = {
    short: 'Keep the response concise, around 100-200 words.',
    medium: 'Provide a moderate response, around 300-500 words.',
    long: 'Provide a detailed response, around 800-1200 words.',
  };

  return `You are a professional content writer. ${styleGuide[style] || ''} ${lengthGuide[length] || ''}`;
}
```

#### æ­¥éª¤5: æ·»åŠ é€Ÿç‡é™åˆ¶ä¸­é—´ä»¶

**`backend/src/middleware/rateLimit.ts`**

```typescript
import { Request, Response, NextFunction } from 'express';

interface RateLimitOptions {
  windowMs: number;
  max: number;
}

interface RateLimitStore {
  [key: string]: {
    count: number;
    resetTime: number;
  };
}

const store: RateLimitStore = {};

/**
 * ç®€å•çš„é€Ÿç‡é™åˆ¶ä¸­é—´ä»¶
 * ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ Redis å­˜å‚¨
 */
export function rateLimiter(options: RateLimitOptions) {
  const { windowMs, max } = options;

  return (req: Request, res: Response, next: NextFunction) => {
    // ä½¿ç”¨ IP ä½œä¸ºæ ‡è¯†ï¼ˆç”Ÿäº§ç¯å¢ƒå¯ç»“åˆç”¨æˆ· IDï¼‰
    const key = req.ip || 'unknown';
    const now = Date.now();

    if (!store[key] || now > store[key].resetTime) {
      store[key] = {
        count: 1,
        resetTime: now + windowMs,
      };
      return next();
    }

    if (store[key].count >= max) {
      const retryAfter = Math.ceil((store[key].resetTime - now) / 1000);
      res.setHeader('Retry-After', retryAfter);
      return res.status(429).json({
        success: false,
        message: `Too many requests. Please try again in ${retryAfter} seconds.`,
      });
    }

    store[key].count++;
    next();
  };
}
```

#### æ­¥éª¤6: æ³¨å†Œè·¯ç”±åˆ°ä¸»åº”ç”¨

**`backend/src/app.ts`**ï¼ˆæ›´æ–°ï¼‰

```typescript
import express from 'express';
import dotenv from 'dotenv';
import { corsMiddleware } from './middleware/cors';
import { errorHandler } from './middleware/errorHandler';
import feedbackRoutes from './routes/feedback';
import healthRoutes from './routes/health';
import authRoutes from './routes/auth';
import toolsRoutes from './routes/tools';  // â† æ–°å¢
import { startBackupCron } from './services/backupCron';

dotenv.config();

const app = express();
const PORT = process.env.PORT || 8000;

// Middleware
app.use(express.json({ limit: '10mb' }));  // â† å¢åŠ è¯·æ±‚ä½“å¤§å°é™åˆ¶
app.use(express.urlencoded({ extended: true }));
app.use(corsMiddleware);

// Routes
app.use('/api', feedbackRoutes);
app.use('/api', healthRoutes);
app.use('/api', authRoutes);
app.use('/api/tools', toolsRoutes);  // â† æ–°å¢å·¥å…·è·¯ç”±

// Error handler
app.use(errorHandler);

// Start server
app.listen(PORT, () => {
  console.log(`âœ… Server is running on port ${PORT}`);
  console.log(`ğŸ“ API: http://localhost:${PORT}/api`);
  console.log(`ğŸ”§ Tools API: http://localhost:${PORT}/api/tools`);  // â† æ–°å¢
  console.log(`ğŸ’š Health check: http://localhost:${PORT}/api/health`);
  console.log(`ğŸ” Auth API: http://localhost:${PORT}/api/auth`);

  if (process.env.NODE_ENV === 'production') {
    startBackupCron();
  }
});

export default app;
```

---

### å‰ç«¯å¼€å‘è§„èŒƒ

#### å‰ç«¯è°ƒç”¨åç«¯ API

**`frontend/src/lib/toolsApi.ts`**

```typescript
import axios from 'axios';

const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000';

export const toolsApi = axios.create({
  baseURL: `${API_BASE_URL}/api/tools`,
  headers: {
    'Content-Type': 'application/json',
  },
  timeout: 60000, // AI è¯·æ±‚å¯èƒ½è¾ƒæ…¢
});

// è¯·æ±‚æ‹¦æˆªå™¨ï¼šæ·»åŠ  token
toolsApi.interceptors.request.use((config) => {
  const token = localStorage.getItem('token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// å“åº”æ‹¦æˆªå™¨ï¼šç»Ÿä¸€é”™è¯¯å¤„ç†
toolsApi.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 429) {
      throw new Error('è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•');
    }
    throw new Error(error.response?.data?.message || 'æœåŠ¡æš‚æ—¶ä¸å¯ç”¨');
  }
);

/**
 * AI Writer API
 */
export const aiWriterApi = {
  generate: async (prompt: string, options?: {
    style?: 'professional' | 'casual' | 'creative';
    length?: 'short' | 'medium' | 'long';
  }) => {
    const response = await toolsApi.post('/ai-writer/generate', {
      prompt,
      ...options,
    });
    return response.data;
  },

  improve: async (content: string, instruction?: string) => {
    const response = await toolsApi.post('/ai-writer/improve', {
      content,
      instruction,
    });
    return response.data;
  },
};
```

#### å‰ç«¯ç»„ä»¶ç¤ºä¾‹

**`frontend/src/components/tools/AIWriter/index.tsx`**

```typescript
'use client';

import { useState, useMemo } from 'react';
import { aiWriterApi } from '@/lib/toolsApi';

interface AIWriterProps {
  labels?: {
    title?: string;
    subtitle?: string;
    promptPlaceholder?: string;
    generateButton?: string;
    generatingText?: string;
    resultLabel?: string;
    errorPrefix?: string;
  };
}

const DEFAULT_LABELS = {
  title: 'AI Writer',
  subtitle: 'Generate high-quality content with AI',
  promptPlaceholder: 'Describe what you want to write...',
  generateButton: 'Generate',
  generatingText: 'Generating...',
  resultLabel: 'Generated Content',
  errorPrefix: 'Error',
};

export default function AIWriter({ labels }: AIWriterProps) {
  const mergedLabels = useMemo(() => ({
    ...DEFAULT_LABELS,
    ...labels,
  }), [labels]);

  const [prompt, setPrompt] = useState('');
  const [result, setResult] = useState('');
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // é…ç½®é€‰é¡¹
  const [style, setStyle] = useState<'professional' | 'casual' | 'creative'>('professional');
  const [length, setLength] = useState<'short' | 'medium' | 'long'>('medium');

  const handleGenerate = async () => {
    if (!prompt.trim()) return;

    setLoading(true);
    setError(null);
    setResult('');

    try {
      const response = await aiWriterApi.generate(prompt, { style, length });
      if (response.success) {
        setResult(response.data.content);
      } else {
        setError(response.message);
      }
    } catch (err: any) {
      setError(err.message);
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="w-full max-w-4xl mx-auto px-4 py-8">
      {/* æ ‡é¢˜ */}
      <div className="text-center mb-8">
        <h1 className="text-4xl font-bold text-neutral-900 mb-2">
          {mergedLabels.title}
        </h1>
        <p className="text-lg text-gray-600">
          {mergedLabels.subtitle}
        </p>
      </div>

      {/* è¾“å…¥åŒºåŸŸ */}
      <div className="card mb-6">
        <textarea
          className="textarea-field min-h-[150px]"
          placeholder={mergedLabels.promptPlaceholder}
          value={prompt}
          onChange={(e) => setPrompt(e.target.value)}
          disabled={loading}
        />

        {/* é€‰é¡¹ */}
        <div className="flex flex-wrap gap-4 mt-4">
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">Style</label>
            <select
              className="input-field"
              value={style}
              onChange={(e) => setStyle(e.target.value as any)}
              disabled={loading}
            >
              <option value="professional">Professional</option>
              <option value="casual">Casual</option>
              <option value="creative">Creative</option>
            </select>
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">Length</label>
            <select
              className="input-field"
              value={length}
              onChange={(e) => setLength(e.target.value as any)}
              disabled={loading}
            >
              <option value="short">Short</option>
              <option value="medium">Medium</option>
              <option value="long">Long</option>
            </select>
          </div>
        </div>

        <button
          className="btn-primary w-full mt-4"
          onClick={handleGenerate}
          disabled={loading || !prompt.trim()}
        >
          {loading ? mergedLabels.generatingText : mergedLabels.generateButton}
        </button>
      </div>

      {/* é”™è¯¯æç¤º */}
      {error && (
        <div className="bg-red-100 text-red-800 p-4 rounded-lg mb-6">
          {mergedLabels.errorPrefix}: {error}
        </div>
      )}

      {/* ç»“æœåŒºåŸŸ */}
      {result && (
        <div className="card">
          <h3 className="text-lg font-semibold mb-3">{mergedLabels.resultLabel}</h3>
          <div className="bg-gray-50 p-4 rounded-lg whitespace-pre-wrap">
            {result}
          </div>
          <button
            className="btn-secondary mt-4"
            onClick={() => navigator.clipboard.writeText(result)}
          >
            Copy to Clipboard
          </button>
        </div>
      )}
    </div>
  );
}
```

---

## å¤–éƒ¨ AI API æ¥å…¥æŒ‡å—

### æ”¯æŒçš„ AI æœåŠ¡

| æœåŠ¡ | æ¥å£ç±»å‹ | æ¨èåœºæ™¯ | æˆæœ¬ |
|------|---------|---------|------|
| **OpenAI** | OpenAI æ ‡å‡† | é€šç”¨åœºæ™¯ã€é«˜è´¨é‡è¾“å‡º | ä¸­ç­‰ |
| **Claude** | Anthropic | é•¿æ–‡æœ¬ã€å¤æ‚æ¨ç† | è¾ƒé«˜ |
| **DeepSeek** | OpenAI å…¼å®¹ | ä¸­æ–‡åœºæ™¯ã€æ€§ä»·æ¯”é«˜ | è¾ƒä½ |
| **é€šä¹‰åƒé—®** | OpenAI å…¼å®¹ | ä¸­æ–‡åœºæ™¯ | è¾ƒä½ |
| **æ™ºè°± AI** | OpenAI å…¼å®¹ | ä¸­æ–‡åœºæ™¯ | è¾ƒä½ |

### ç¯å¢ƒå˜é‡é…ç½®

**`backend/.env`**

```bash
# ============================================
# AI æœåŠ¡é…ç½®
# ============================================

# OpenAI
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxx
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4o-mini

# Claude (Anthropic)
CLAUDE_API_KEY=sk-ant-xxxxxxxxxxxxxxxxxxxx
CLAUDE_BASE_URL=https://api.anthropic.com
CLAUDE_MODEL=claude-3-haiku-20240307

# DeepSeek
DEEPSEEK_API_KEY=sk-xxxxxxxxxxxxxxxxxxxx
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1
DEEPSEEK_MODEL=deepseek-chat

# é€šä¹‰åƒé—® (é˜¿é‡Œäº‘)
QWEN_API_KEY=sk-xxxxxxxxxxxxxxxxxxxx
QWEN_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
QWEN_MODEL=qwen-turbo

# æ™ºè°± AI
ZHIPU_API_KEY=xxxxxxxxxxxxxxxxxxxx
ZHIPU_BASE_URL=https://open.bigmodel.cn/api/paas/v4
ZHIPU_MODEL=glm-4-flash
```

**âš ï¸ å®‰å…¨è­¦å‘Š**ï¼š
- `.env` æ–‡ä»¶å¿…é¡»æ·»åŠ åˆ° `.gitignore`
- ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†æœåŠ¡
- å®šæœŸè½®æ¢ API Key

### API Key å®‰å…¨æœ€ä½³å®è·µ

```typescript
// âŒ ç»å¯¹ç¦æ­¢
const apiKey = 'sk-xxxxxxxx'; // ç¡¬ç¼–ç 

// âŒ ç¦æ­¢
// åœ¨å‰ç«¯ä»£ç ä¸­ä½¿ç”¨ API Key
const response = await fetch('https://api.openai.com/v1/chat/completions', {
  headers: { 'Authorization': `Bearer ${process.env.NEXT_PUBLIC_OPENAI_KEY}` }
});

// âœ… æ­£ç¡®åšæ³•
// åªåœ¨åç«¯ä½¿ç”¨ï¼Œä»ç¯å¢ƒå˜é‡è¯»å–
const apiKey = process.env.OPENAI_API_KEY;
if (!apiKey) {
  throw new Error('OPENAI_API_KEY is not configured');
}
```

### å¤š AI æœåŠ¡æ”¯æŒ

**`backend/src/services/ai/index.ts`**

```typescript
import { OpenAIService, openaiService, deepseekService } from './openaiService';
import { aiConfig, validateAiConfig } from '../../config/ai';

type AIProvider = 'openai' | 'deepseek' | 'qwen' | 'zhipu';

/**
 * AI æœåŠ¡å·¥å‚
 * æ ¹æ® provider è¿”å›å¯¹åº”çš„æœåŠ¡å®ä¾‹
 */
export function getAIService(provider: AIProvider = 'openai'): OpenAIService {
  switch (provider) {
    case 'openai':
      if (!validateAiConfig('openai')) {
        throw new Error('OpenAI is not configured');
      }
      return openaiService;

    case 'deepseek':
      if (!validateAiConfig('deepseek')) {
        throw new Error('DeepSeek is not configured');
      }
      return deepseekService;

    case 'qwen':
      return new OpenAIService(
        process.env.QWEN_API_KEY || '',
        process.env.QWEN_BASE_URL || '',
        process.env.QWEN_MODEL || 'qwen-turbo'
      );

    case 'zhipu':
      return new OpenAIService(
        process.env.ZHIPU_API_KEY || '',
        process.env.ZHIPU_BASE_URL || '',
        process.env.ZHIPU_MODEL || 'glm-4-flash'
      );

    default:
      throw new Error(`Unknown AI provider: ${provider}`);
  }
}

/**
 * è·å–å¯ç”¨çš„ AI æœåŠ¡åˆ—è¡¨
 */
export function getAvailableProviders(): AIProvider[] {
  const providers: AIProvider[] = [];

  if (validateAiConfig('openai')) providers.push('openai');
  if (validateAiConfig('deepseek')) providers.push('deepseek');
  if (process.env.QWEN_API_KEY) providers.push('qwen');
  if (process.env.ZHIPU_API_KEY) providers.push('zhipu');

  return providers;
}
```

### é”™è¯¯å¤„ç†ä¸é‡è¯•

**`backend/src/services/ai/retryWrapper.ts`**

```typescript
interface RetryOptions {
  maxRetries?: number;
  initialDelay?: number;
  maxDelay?: number;
  backoffMultiplier?: number;
}

/**
 * å¸¦é‡è¯•çš„ AI è¯·æ±‚åŒ…è£…å™¨
 */
export async function withRetry<T>(
  fn: () => Promise<T>,
  options: RetryOptions = {}
): Promise<T> {
  const {
    maxRetries = 3,
    initialDelay = 1000,
    maxDelay = 10000,
    backoffMultiplier = 2,
  } = options;

  let lastError: Error;
  let delay = initialDelay;

  for (let attempt = 1; attempt <= maxRetries; attempt++) {
    try {
      return await fn();
    } catch (error: any) {
      lastError = error;

      // ä¸é‡è¯•çš„é”™è¯¯
      if (
        error.message.includes('authentication') ||
        error.message.includes('API key') ||
        error.message.includes('invalid')
      ) {
        throw error;
      }

      // æœ€åä¸€æ¬¡å°è¯•ï¼Œç›´æ¥æŠ›å‡º
      if (attempt === maxRetries) {
        throw error;
      }

      // é€Ÿç‡é™åˆ¶ï¼šç­‰å¾…æ›´é•¿æ—¶é—´
      if (error.message.includes('rate limit')) {
        delay = Math.min(delay * 3, maxDelay);
      }

      console.log(`AI request failed (attempt ${attempt}/${maxRetries}), retrying in ${delay}ms...`);
      await new Promise(resolve => setTimeout(resolve, delay));
      delay = Math.min(delay * backoffMultiplier, maxDelay);
    }
  }

  throw lastError!;
}
```

### ä½¿ç”¨é‡ç›‘æ§ï¼ˆå¯é€‰ï¼‰

**`backend/src/services/ai/usageTracker.ts`**

```typescript
import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

interface UsageRecord {
  provider: string;
  model: string;
  promptTokens: number;
  completionTokens: number;
  totalTokens: number;
  toolName: string;
  userId?: number;
}

/**
 * è®°å½• AI ä½¿ç”¨é‡
 * å¯ç”¨äºæˆæœ¬åˆ†æå’Œç›‘æ§
 */
export async function trackUsage(record: UsageRecord): Promise<void> {
  try {
    // å¦‚æœæœ‰ AIUsage è¡¨ï¼Œå¯ä»¥è®°å½•åˆ°æ•°æ®åº“
    // await prisma.aIUsage.create({ data: record });

    // æˆ–è€…ç®€å•åœ°è®°å½•æ—¥å¿—
    console.log('[AI Usage]', JSON.stringify(record));
  } catch (error) {
    console.error('Failed to track AI usage:', error);
  }
}
```

---

## å®Œæ•´æ¥å…¥æµç¨‹ï¼ˆå‰åç«¯åˆ†ç¦»å·¥å…·ï¼‰

### æµç¨‹æ€»è§ˆ

```
1. åç«¯å¼€å‘
   â”œâ”€â”€ åˆ›å»º AI æœåŠ¡é…ç½®
   â”œâ”€â”€ å®ç°å·¥å…· Controller
   â”œâ”€â”€ åˆ›å»ºå·¥å…·è·¯ç”±
   â””â”€â”€ æ³¨å†Œåˆ°ä¸»åº”ç”¨
        â†“
2. å‰ç«¯å¼€å‘
   â”œâ”€â”€ åˆ›å»º API è°ƒç”¨æ¨¡å—
   â”œâ”€â”€ å¼€å‘å·¥å…·ç»„ä»¶ï¼ˆç‹¬ç«‹é¡¹ç›®ï¼‰
   â”œâ”€â”€ æµ‹è¯•åŠŸèƒ½
   â””â”€â”€ å¤åˆ¶åˆ°ä¸»é¡¹ç›®
        â†“
3. æ¥å…¥ä¸»é¡¹ç›®
   â”œâ”€â”€ å¤åˆ¶å‰ç«¯ç»„ä»¶
   â”œâ”€â”€ åˆ›å»ºé¡µé¢
   â”œâ”€â”€ æ·»åŠ å›½é™…åŒ–ç¿»è¯‘
   â””â”€â”€ æ›´æ–° tools.json
        â†“
4. éƒ¨ç½²
   â”œâ”€â”€ é…ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡
   â”œâ”€â”€ éƒ¨ç½²åç«¯
   â”œâ”€â”€ éƒ¨ç½²å‰ç«¯
   â””â”€â”€ éªŒè¯åŠŸèƒ½
```

### ç¯å¢ƒå˜é‡æ£€æŸ¥æ¸…å•

**åç«¯ `.env`**ï¼š
```bash
# æ•°æ®åº“
DATABASE_URL=postgresql://...

# JWT
JWT_SECRET=your-secret-key

# AI æœåŠ¡ï¼ˆè‡³å°‘é…ç½®ä¸€ä¸ªï¼‰
OPENAI_API_KEY=sk-...
# æˆ–
DEEPSEEK_API_KEY=sk-...

# å…¶ä»–é…ç½®
PORT=8000
NODE_ENV=production
```

**å‰ç«¯ `.env.local`**ï¼š
```bash
# API åœ°å€
NEXT_PUBLIC_API_URL=https://api.yourdomain.com
```

### æµ‹è¯•æ£€æŸ¥æ¸…å•

```markdown
## åç«¯æµ‹è¯•
- [ ] API è·¯ç”±æ­£å¸¸å“åº”
- [ ] é”™è¯¯æƒ…å†µæ­£ç¡®å¤„ç†ï¼ˆæ—  API Keyã€æ— æ•ˆè¾“å…¥ç­‰ï¼‰
- [ ] é€Ÿç‡é™åˆ¶ç”Ÿæ•ˆ
- [ ] è¶…æ—¶å¤„ç†æ­£å¸¸

## å‰ç«¯æµ‹è¯•
- [ ] æ­£å¸¸è¯·æ±‚æˆåŠŸ
- [ ] åŠ è½½çŠ¶æ€æ˜¾ç¤º
- [ ] é”™è¯¯æç¤ºæ­£ç¡®
- [ ] ç½‘ç»œå¼‚å¸¸å¤„ç†

## é›†æˆæµ‹è¯•
- [ ] ç«¯åˆ°ç«¯æµç¨‹æ­£å¸¸
- [ ] å›½é™…åŒ–åˆ‡æ¢æ­£å¸¸
- [ ] å“åº”å¼å¸ƒå±€æ­£å¸¸
```

---

## é™„å½•ï¼šAI å·¥å…·å¿«é€Ÿå‚è€ƒ

### å¸¸è§ AI å·¥å…·ç±»å‹

| å·¥å…·ç±»å‹ | ç¤ºä¾‹ | åç«¯é€»è¾‘ |
|---------|------|---------|
| **æ–‡æœ¬ç”Ÿæˆ** | AI Writer, Blog Generator | å•æ¬¡ chat è°ƒç”¨ |
| **æ–‡æœ¬æ”¹å†™** | Paraphraser, Grammar Fixer | å•æ¬¡ chat è°ƒç”¨ |
| **ç¿»è¯‘å·¥å…·** | AI Translator | å•æ¬¡ chat è°ƒç”¨ |
| **ä»£ç å·¥å…·** | Code Explainer, Code Generator | å•æ¬¡ chat è°ƒç”¨ |
| **å¯¹è¯å·¥å…·** | Chatbot | å¤šè½®å¯¹è¯ï¼Œéœ€è¦ä¸Šä¸‹æ–‡ |
| **åˆ†æå·¥å…·** | Sentiment Analyzer | ç»“æ„åŒ–è¾“å‡º |

### API è¯·æ±‚æ¨¡æ¿

```typescript
// ç®€å•ç”Ÿæˆ
const result = await aiService.chat([
  { role: 'system', content: 'You are a helpful assistant.' },
  { role: 'user', content: userInput },
]);

// å¸¦ä¸Šä¸‹æ–‡çš„å¯¹è¯
const result = await aiService.chat([
  { role: 'system', content: 'You are a helpful assistant.' },
  ...previousMessages,
  { role: 'user', content: userInput },
]);

// ç»“æ„åŒ–è¾“å‡º
const result = await aiService.chat([
  { role: 'system', content: 'Return JSON format: { "sentiment": "positive|negative|neutral", "score": 0-100 }' },
  { role: 'user', content: textToAnalyze },
]);
const parsed = JSON.parse(result.content);
```
